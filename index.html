<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tardis Prototype</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="top">
    <h1>Tardis Prototype</h1>
    <p class="sub">A simple assistant with voice + local memory. Hosted on GitHub Pages.</p>
  </header>

  <main class="layout">
    <section class="card controls">
      <div class="row">
        <label for="model">Model</label>
        <select id="model">
          <option value="google/gemma-2-2b-it" selected>google/gemma-2-2b-it</option>
        </select>
      </div>

      <div class="row slider">
        <label for="honesty">Honesty</label>
        <input id="honesty" type="range" min="0" max="100" value="85" />
        <span id="honestyVal" class="pill">85</span>
      </div>

      <div class="row slider">
        <label for="humor">Humor</label>
        <input id="humor" type="range" min="0" max="100" value="20" />
        <span id="humorVal" class="pill">20</span>
      </div>

      <div class="row">
        <label>Voice</label>
        <button id="mic" class="btn" type="button">üéôÔ∏è Mic</button>
        <label class="check">
          <input id="speak" type="checkbox" checked />
          Read replies aloud
        </label>
      </div>

      <div class="row status">
        <label>Status</label>
        <div id="status" class="statusText">Ready</div>
      </div>

      <details class="notes">
        <summary>Notes</summary>

        <div class="noteBlock">
          <div class="noteTitle">Memory</div>
          <p class="noteText">
            The assistant now remembers the conversation by sending a rolling history to the model.
            You can clear memory below.
          </p>
          <div class="noteActions">
            <button id="clearMemory" type="button" class="btn btn-secondary">Clear Memory</button>
            <label class="check">
              <input id="useSummary" type="checkbox" checked />
              Use ‚Äúsummary memory‚Äù
            </label>
          </div>
          <div class="noteSmall">
            Tip: Commands: <code>/rot13 TEXT</code>, <code>/caesar TEXT</code>, <code>/caesar 13 TEXT</code>
          </div>
        </div>

        <div class="noteBlock">
          <div class="noteTitle">Cipher Tools</div>
          <label class="miniLabel" for="cipherIn">Text</label>
          <textarea id="cipherIn" rows="3" placeholder="Paste encoded text here..."></textarea>

          <div class="noteActions">
            <button id="btnRot13" type="button" class="btn">ROT13</button>
            <button id="btnCaesarAuto" type="button" class="btn">Caesar Auto</button>
          </div>

          <label class="miniLabel" for="cipherOut">Output</label>
          <textarea id="cipherOut" rows="6" readonly placeholder="Decoded output will appear here..."></textarea>
        </div>
      </details>

      <div class="footerLine">
        Powered by Cloudflare Workers and Hugging Face.
      </div>
    </section>

    <section class="card chat">
      <div id="log" class="log" aria-live="polite"></div>

      <form id="form" class="composer">
        <input id="msg" class="msg" type="text" placeholder="Type a message‚Ä¶" autocomplete="off" />
        <button class="btn" type="submit">Send</button>
      </form>
    </section>
  </main>

  <script src="app.js?v=3"></script>
</body>
</html>
